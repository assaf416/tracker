<%

# Leaflet.tile_layer = "https://tile.openstreetmap.org/{z}/{x}/{y}.png"
# You can also use any other tile layer here if you don't want to use Cloudmade - see http://leafletjs.com/reference.html#tilelayer for more

Leaflet.tile_layer = "https://tile.openstreetmap.org/{z}/{x}/{y}.png"
Leaflet.attribution = "Your attribution statement"
Leaflet.max_zoom = 18 
%>

<style>
    #map { height: 600px; width:100%; }
</style>

<div class="card">
  <div class="card-header">
    <div class="row">
      <div class="col-lg-3">
        Map
      </div>
      <div class="col-lg-9 text-end">
        <div class="btn-group">
          <button
            type="button"
            class="
              btn btn-outline-primary btn-labeled btn-labeled-start dropdown-toggle btn-sm
            "
            data-bs-toggle="dropdown"
          >
            <span class="btn-labeled-icon bg-primary text-white">
              <i class="fa-solid fa-shield-halved"></i>
            </span>
            Geofence
          </button>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item"><i class="fa-solid fa-shield-halved me-1"></i>
              Action</a>
            <a href="#" class="dropdown-item">Set Geofnce 5m</a>
            <a href="#" class="dropdown-item">Set Geofence 100m</a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">Future Geofeonces</a>
          </div>
        </div>
        <div class="btn-group">
          <button
            type="button"
            class="
              btn btn-outline-primary btn-labeled btn-labeled-start dropdown-toggle btn-sm
            "
            data-bs-toggle="dropdown"
          >
            <span class="btn-labeled-icon bg-primary text-white">
              <i class="fa-solid fa-comments"></i>
            </span>
            Message
          </button>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item"><i class="fa-solid fa-shield-halved me-1"></i>
              Action</a>
            <a href="#" class="dropdown-item">Another action</a>
            <a href="#" class="dropdown-item">One more action</a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">Separated line</a>
          </div>
        </div>
          <div class="btn-group">
          <button type="button" class="btn btn-flat-primary btn-icon">
            <i class="fa-solid fa-thumbs-up"></i>
          </button>
          <button type="button" class="btn btn-flat-danger btn-icon">
            <i class="fa-solid fa-thumbs-down"></i>
          </button>
          <button type="button" class="btn btn-flat-info btn-icon">
           <i class="fa-solid fa-clock-rotate-left"></i>
          </button>
          <button type="button" class="btn btn-flat-info btn-icon">
           <i class="fa-solid fa-file-video"></i>
          </button>
        </div>
        <div class="btn-group">
          <button
            type="button"
            class="
              btn btn-outline-primary btn-labeled btn-labeled-start dropdown-toggle
            "
            data-bs-toggle="dropdown"
          >
            <span class="btn-labeled-icon bg-primary text-white">
              <i class="fa-solid fa-comments"></i>
            </span>
            Activity
          </button>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item"><i class="fa-solid fa-shield-halved me-1"></i>
              Action</a>
            <a href="#" class="dropdown-item">Another action</a>
            <a href="#" class="dropdown-item">One more action</a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">Separated line</a>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div class="card-body">
    <div id="map-bg" style="" dir="ltr">
      <% pos = Activity.last%>
      <% markers = []%>
      <% Activity.all.sample(10).each{|p| markers << {
       :latlng => [p.lat, p.longt],
       :popup => p.created_at
     }} %>
     <%= map(:center => {
        :latlng => [pos.lat, pos.longt], :zoom => 18},
        :markers =>  markers 
          ) %>
      <div class="card-footer">
        <div>
          <button type="button" class="btn btn-flat-primary btn-icon">
            <i class="fa-solid fa-thumbs-up"></i>
          </button>
          <button type="button" class="btn btn-flat-danger btn-icon">
            <i class="fa-solid fa-thumbs-down"></i>
          </button>
          <button type="button" class="btn btn-flat-info btn-icon">
            <i class="fa-solid fa-map"></i>
          </button>
          <button type="button" class="btn btn-flat-info btn-icon">
            <i class="fa-solid fa-map"></i>
          </button>
        </div>
      </div>
    </div>
